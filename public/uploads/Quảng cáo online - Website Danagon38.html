<!DOCTYPE html>
<!-- saved from url=(0093)http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&type=news -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Quảng cáo online - Website Danagon</title>

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="description" content="Quảng cáo, marketing online, thương mại điện tử, bán hàng, thông tin địa phương">
<meta name="keywords" content="Quảng cáo, marketing online, thương mại điện tử, bán hàng, thông tin địa phương">

<!--BEGIN: FOR FACEBOOK -->
<meta content="" property="og:site_name">
<meta property="og:url" itemprop="url" content="">
<meta property="og:image" content="">
<meta content="Quảng cáo online - Website Danagon" itemprop="headline" property="og:title">
<meta content="" property="og:description">
<!--END: FOR FACEBOOK -->

<meta name="copyright" content="">
<meta name="author" content="">
<meta name="robots" content="index,follow">
<meta name="geo.placename" content="">
<meta name="geo.region" content="">
<meta name="geo.position" content="">

<meta name="revisit-after" content="days">
<link rel="alternate" href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news" hreflang="vi-vn">

<!--BEGIN: FOR TWITTER -->
<meta name="twitter:card" value="summary">
<meta name="twitter:url" content="https:///">
<meta name="twitter:title" content="">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="">
<meta name="twitter:site" content="">
<meta name="twitter:creator" content="">
<!--END: FOR TWITTER -->
	<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/wrapper.css">
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/header.css"> 
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/banner.css"> 
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/menu.css"> 
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/content.css"> 
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/footer.css"> 
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/text.css"> 
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/column.css">
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/box.css">
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/table.css">
<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/form.css">
<style>
.autocomplete-items{
	left: 110px !important;
}
.autocomplete_search_input
{
    padding: 4px 10px 4px 0px !important;
}
.autocomplete_search_input_padding
{
    padding: 4px 70px 4px 0px !important;
}

.autocomplete_button_get
{
    margin-left: -66px !important;
}
</style>	<script src="./Quảng cáo online - Website Danagon_files/jquery.min.js.download"></script>

<link href="./Quảng cáo online - Website Danagon_files/jquery-ui.css" rel="stylesheet">
<script src="./Quảng cáo online - Website Danagon_files/jquery-ui.min.js.download"></script>

<link rel="stylesheet" href="./Quảng cáo online - Website Danagon_files/style.css">
<script>
	function show_menu()
	{
		$("#menu1").animate({width: 'toggle'}, "slow");
	}
</script><script>function remove_unicode(str_unicode) 
{  
	/*thay thế các ký tự tiếng Việt*/
	str_unicode= str_unicode.toLowerCase();  
	str_unicode= str_unicode.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a");  
	str_unicode= str_unicode.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e");  
	str_unicode= str_unicode.replace(/ì|í|ị|ỉ|ĩ/g,"i");  
	str_unicode= str_unicode.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o");  
	str_unicode= str_unicode.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u");  
	str_unicode= str_unicode.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y");  
	str_unicode= str_unicode.replace(/đ/g,"d");  
	
	/*xóa các ký tự đặc biệt, chỉ để lại các ký tự a-z,0-9, khoảng trắng*/
	str_unicode = str_unicode.replace(/[^A-Za-z0-9\s]/g,'');
	str_unicode = str_unicode.trim();
	
	/*thay thế các khoảng trắng bằng - */
	str_unicode = str_unicode.replace(/ /gi, "-");
	return str_unicode;  
} 

 function format_number_textbox(textbox_obj)
 {
        sotien =  textbox_obj.value ;
        sotien = sotien.replace(/,/g , "");
        if (sotien == null) sotien=0;
        if (sotien == '') sotien=0;
        if (sotien == 'NaN') sotien=0;
        sotien = parseFloat(sotien);
        textbox_obj.value = format_number(parseFloat(sotien));
 }
function format_number(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}


/*for encode and decode*/
function utoa(str) {
    return window.btoa(unescape(encodeURIComponent(str)));
}
function atou(str) {
    return decodeURIComponent(escape(window.atob(str)));
}

function b64EncodeUnicode(str) 
{
    return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,  function toSolidBytes(match, p1) {     return String.fromCharCode('0x' + p1);   }));
}
function b64DecodeUnicode(str) 
{
    return decodeURIComponent(atob(str).split('').map(function(c) {  return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);  }).join(''));
}

function get_json_value(json_data, key)
{
	 if(json_data.hasOwnProperty(key)) return b64DecodeUnicode(json_data[key]);
	 return "";
}

/*mảng chứa các tham số*/
var array_p = [];

/*mảng chứa các tên hàm*/
var array_f = [];
function run_js()
{
	 for(tmp_i=0; tmp_i< num_js_data; tmp_i++) 
	 {
		 /* lấy tên đối tượng vào biến o, tên sự kiện vào biến e, tên hàm vào biến f, tham số vào biến str_p, tên kết quả trả về vào biến v*/
		 /* tên đối tượng javascript vào biến js_o, convert str_p thành mảng json*/
		 o = get_json_value(array_js_data[tmp_i],'o');
		 e = get_json_value(array_js_data[tmp_i],'e');		 		 
		 f = get_json_value(array_js_data[tmp_i],'f');
		 js_o = get_json_value(array_js_data[tmp_i],'in');		 
		 str_p = get_json_value(array_js_data[tmp_i],'p');
		 v = get_json_value(array_js_data[tmp_i],'v');				
		
		if(debug == "js") { alert("o1:" + o + ", e1: " + e + ", f1:" + f + ", p1:" + str_p + ", js_o:" + js_o); }						
		
		 /* chuyển tham số về json*/		
		 try {  	p = JSON.parse(str_p);   } catch (e) { p = {}; }
		
		/*đưa tham số vào mảng tham số*/		
		array_p[tmp_i] = p;
		array_f[tmp_i] = f;		
		
		/*tạo thuộc tính num_param có giá trị bằng số dòng hiện tại cho đối tượng o*/
		/* mục đích để khi đối tượng có even như click, thì khi click có thể định vị được vị trí tham số*/
		$(o).attr("num_js",tmp_i);
		
		 /*gọi hàm*/
		try {

			/*nếu có đối tượng, nếu không có đối tượng thì chỉ gọi hàm và tham số hàm*/
			if(o != "")
			{

				if(debug == "js") { alert("o2:" + o + ", e2: " + e + ", f2:" + f + ", p:2" + str_p + ", js_o:" + js_o); }						
				/*nếu có sự kiện, tạo sự kiện cho đối tượng*/
				/*gọi hàm call_f_by_event bởi vì tại đây hàm chưa được gọi, hàm chỉ được gọi khi sự kiện xảy ra*/ 
				if(e != "")
				{
					if(debug == "js") { alert("o3:" + o + ", e3: " + e + ", f3:" + f + ", p3:" + str_p + ", js_o: " + js_o); }		
				 	$(o)[e](function(){  call_f_by_event( $(this));	} );
				}
				else $(o)[f](p); /* Nếu không có sự kiện thì gọi hàm jquery của đối tượng*/
				


				
			}
			else
			{
				call_f(f,p, v);
			}
		}catch(err) {
			 /*gọi hàm*/
			 console.log("Loi goi ham: " + f + " - " + err.message)
		}
	 }
	 /*end: for(tmp_i=0; tmp_i< num_js_data; tmp_i++) */
			
	
}
/*end : function run_js()*/

/*gọi hàm javascript: f với tham số p, kết quả trả về biến v*/
function call_f(f,p, return_v)
{
	if(return_v == "")
	{

		if( Array.isArray(p)) window[f].apply(this,p);
		else window[f](p);
	}
	else
	{
		/*Loại bỏ dấu " ra khỏi tên biến */
		return_v = return_v.replace(/\"/g, '')
	
		
		if( Array.isArray(p)) window[return_v] = window[f].apply(this,p);
		else window[return_v] = window[f](p);
		
	}
	
}

function call_f_by_event(o)
{
	param = o.attr("num_js");
	p = array_p[param];
	f = array_f[param];
	if( Array.isArray(p)) window[f].apply(this,p);
	else window[f](p);
}

/*hàm tạo thông báo chế độ đang phát triển*/
function p_mode()
{
	var obj = document.createElement("div");
	obj.innerHTML = '<div id = "mode" style="width:100%; height: auto; background: green; color: white; text-align: center">Chú ý: Đây là phiên bản không chính thức! </div>';
	document.body.insertBefore(obj, document.body.firstChild);
	

}
$(function()
{
	/* nếu không phải bản chính thì thông báo*/	
	if( mode != "main") p_mode();
	
	
	/*gọi hàm format số cho các đối tượng có thuộc tính valid = num*/
	if($( "input[valid='num']" ).length>0) $( "input[valid='num']" ).keyup(function() {  format_number_textbox(this); });	
	
	/*gọi hàm datepicker cho các đối tượng có thuộc tính valid = date*/
	if($( "input[valid='date']" ).length>0) $( "input[valid='date']" ).datepicker({dateFormat: "dd-mm-yy"});	
		
	
});

function loading(obj)
{
	img_loading_path = "/";
	if(mode == "dev")  img_loading_path  += "layout/";
	else  img_loading_path  += "templates/";
	
	img_loading_path  += "system/images/loading.gif";

	str_loading = "<image src ='" +  img_loading_path+ "' style ='width: 30px !important; height: auto'>";
	obj.innerHTML = str_loading;
	
}/* Constructor*/
function Uploader(params) 
{
	selector = "";
	if(params.hasOwnProperty('target')) selector = params.target;
	if(selector == "")
	{
		alert("Xin vui lòng đưa tham số target");
		return
	}
	
	this.num = 0;
	this.num_selected = 0;
		
	/*tạo thuộc tính uploader_obj cho params là đối tượng hiện tại*/
	params.uploader_obj = this;
	
	$(selector).upload_file(params);
	this.num = total_num_uploader;
	this.num_uploaded = 0;
	
	/*Hàm bắt đầu upload file*/
	this.start = function()
	{
		start_upload(this.num);
	}
	/*end: this.start = function (param)*/

	/*Hàm hiển thị file đã upload*/
	this.show = function (str_file_name)
	{
		upload_file_show(this.num, str_file_name);
	}
	/*end: this.start = function (param)*/
}


function b64toBlob(b64Data, contentType, sliceSize) 
{
        contentType = contentType || '';
        sliceSize = sliceSize || 512;

        var byteCharacters = atob(b64Data);
        var byteArrays = [];

        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
            var slice = byteCharacters.slice(offset, offset + sliceSize);

            var byteNumbers = new Array(slice.length);
            for (var i = 0; i < slice.length; i++) {
                byteNumbers[i] = slice.charCodeAt(i);
            }

            var byteArray = new Uint8Array(byteNumbers);

            byteArrays.push(byteArray);
        }

      var blob = new Blob(byteArrays, {type: contentType});
      return blob;
}

/* Hàm lấy link các file đã upload */
/*n: số uploader, s_f_u: str_file_uploaded chuỗi giá trị file đã upload, giá trị của trường img hoặc relate_img , sep: chuỗi phân cách các thành phần*/
function upload_file_get_link(s_f_u, sep)
{

		
	if(s_f_u === undefined) { alert("Xin vui lòng truyền tham số file đã uploaded"); return; }
		
	if(s_f_u =="") return;
	

	
	/*Nếu không có chuỗi phân cách các thành thần thì để giá trị bằng rỗng*/
	if(sep === undefined) sep = "";

	
	/*chuỗi str_result, lưu trữ kết quả*/
	
	s_r = "";
	/*BEGIN: Cắt file ra thành nhiều phần(nếu upload nhiều file): array_file_uploaded*/	
	a_f_u = s_f_u.split(String.fromCharCode(7));
	if(a_f_u.length)
	{
		/*num file in uploader*/
		n_f_i_u = 0;
		
		/*BEGIN: Duyệt từng phần tử chứa thông tin file*/	
		for(i=0; i< a_f_u.length; i++) 
		{
			/*Kiểm tra phần tử có giá trị không*/
			if(a_f_u[i]!= "")
			{
				/*Cắt file thành 3 phần: 0: tên file trên server, 1: tên file client, 2: Mô tả về file: array_item*/		
				a_i = a_f_u[i].split(String.fromCharCode(8));
				
				/*f_n_o_s: file name on server, f_n_c: file name client, f_d: file description*/
				f_n_o_s = "";	f_n_c = "";	f_d = "";								
				if(a_i[0]) f_n_o_s 	=  a_i[0];		
				if(a_i[1]) f_n_c 	  =  a_i[1];		
				if(a_i[2]) f_d 		=  a_i[2];				
					
								
				/*begin: Nếu có tên file ở server*/				
				if(f_n_o_s)
				{	
					/*lấy phần mở rộng: file_ext, và file type của file name om server*/
					f_e = f_n_o_s.split('.').pop();
					
					/*nếu file mở rộng là jpg, jpeg, gif, png, ... thì file type là image*/
					f_t = "";
					if(array_image_file_ext.indexOf(f_e.toLowerCase()) >= 0) f_t = "image";
					
					f_n_c = "File " + (i+1);
					
					/*lấy đường link đến file*/
					if(s_r != "") s_r += sep;
					s_r += "<a target ='blank' class ='upload_file_link' href=\"" + file_url+ f_n_o_s +"\">" + f_n_c + "</a>";		
				}
				/*end: if(f_n_o_s)*/				
				/*end: Nếu có tên file ở server*/								
				
			}
			/*END: if(a_f_u[i]!= "")*/
			/*END: Kiểm tra phần tử có giá trị không*/

			
		}
		/*END: for(i=0; i< a_f_u.length; i++) */
		/*END: Duyệt từng phần tử chứa thông tin file*/	
		

	}
	/*end: if(a_f_u.length)*/
	/*END: Cắt file ra thành nhiều phần(nếu upload nhiều file): array_file_uploaded*/		

	return s_r;
}
/* Hàm hiển thị file đã upload */

/* Hàm hiển thị file đã upload */
/*n: số uploader, s_f_u: str_file_uploaded chuỗi giá trị file đã upload, giá trị của trường img hoặc relate_img */
function upload_file_show(n, s_f_u)
{
	if(s_f_u =="") return;
	
	/*BEGIN: Cắt file ra thành nhiều phần(nếu upload nhiều file): array_file_uploaded*/	
	a_f_u = s_f_u.split(String.fromCharCode(7));
	if(a_f_u.length)
	{
		/*num file in uploader*/
		n_f_i_u = 0;
		
		/*BEGIN: Duyệt từng phần tử chứa thông tin file*/	
		for(i=0; i< a_f_u.length; i++) 
		{
			/*Kiểm tra phần tử có giá trị không*/
			if(a_f_u[i]!= "")
			{
				/*Cắt file thành 3 phần: 0: tên file trên server, 1: tên file client, 2: Mô tả về file: array_item*/		
				a_i = a_f_u[i].split(String.fromCharCode(8));
				
				/*f_n_o_s: file name on server, f_n_c: file name client, f_d: file description*/
				f_n_o_s = "";	f_n_c = "";	f_d = "";								
				if(a_i[0]) f_n_o_s 	=  a_i[0];		if(a_i[1]) f_n_c 	  =  a_i[1];		if(a_i[2]) f_d 		=  a_i[2];				
					
								
				/*begin: Nếu có tên file ở server*/				
				if(f_n_o_s)
				{	
					/*lấy phần mở rộng: file_ext, và file type của file name om server*/
					f_e = f_n_o_s.split('.').pop();
					
					/*nếu file mở rộng là jpg, jpeg, gif, png, ... thì file type là image*/
					f_t = "";
					if(array_image_file_ext.indexOf(f_e.toLowerCase()) >= 0) f_t = "image";
				
				
					/*lấy hộp file item*/				
					document.getElementById("uploader_"+ n).innerHTML += get_file_item(n,n_f_i_u,f_t,file_url+ f_n_o_s,f_n_c,true);

					/*tăng số file trong uploader: n_f_i_u lên 1*/
					n_f_i_u++;
					
					
					array_uploader[n].num_file++;
				}
				/*end: if(f_n_o_s)*/				
				/*end: Nếu có tên file ở server*/								
				
			}
			/*END: if(a_f_u[i]!= "")*/
			/*END: Kiểm tra phần tử có giá trị không*/

			
		}
		/*END: for(i=0; i< a_f_u.length; i++) */
		/*END: Duyệt từng phần tử chứa thông tin file*/	
				
		$(".upload_file_remove").on('click', function (e){	upload_file_remove_file_item($(this));	});			

	}
	/*end: if(a_f_u.length)*/
	/*END: Cắt file ra thành nhiều phần(nếu upload nhiều file): array_file_uploaded*/		
	
	/*Lưu giữ lại số file đã chọn vào biến num_last*/
	if(array_uploader[n].params.multiple != "multiple") array_uploader[n].num_last = 0;
	else array_uploader[n].num_last = array_uploader[n].num_file;
	


}
/* Hàm hiển thị file đã upload*/

/*BEGIN: Hàm xóa 1 phần tử ra khỏi giá trị của uploader*/
function upload_file_update_value(u,n,s)
{

}
/*END: Hàm xóa 1 phần tử ra khỏi giá trị của uploader*/

/*Hàm xóa 1 phần tử ra khỏi giá trị của uploader*/
function upload_file_remove_value(u,n)
{
	v1 = document.getElementById(array_uploader[u].value).value;
	
	/*Cắt chuỗi giá trị file đã upload thành nhiều phần*/
	array_items = v1.split(String.fromCharCode(7));
	v2 = "";
	if(array_items.length>0)
	{
		for(i=0; i< array_items.length; i++)
		{	
			/*Nếu phần tử có giá trị và số phần tử khác với vị trí cần xóa thì cộng vào chuỗi v2*/
			if((array_items[i] != "") && (i!=n) )
			{
				if(v2 != "") v2 += String.fromCharCode(7);
				v2 += array_items[i];
			}
		}
		/*end: for*/
	}
	/*end: if(array_items.length>0)*/

	/*cập nhật lại giá trị của uploader*/
	document.getElementById(array_uploader[u].value).value = v2;
}
/*Hàm xóa 1 phần tử ra khỏi giá trị của uploader*/

/*Hàm xóa 1 phần tử ra khỏi uploader*/
function upload_file_remove_file_item(obj)
{
	/*if(!confirm("Are you sure you want to delete!")) return;*/
	var item_o = obj.parent();
	
	/*lấy số uploader: u,  vị trí file cần xóa:n, trạng thái: s (đã upload hay chưa)  trong uploader*/
	u = item_o.attr('u');
	n = item_o.attr('n');	
	s = item_o.attr('status');		
	if(s == "true") upload_file_remove_value(u,n);
	item_o.remove();
	
}
/*Hàm xóa 1 phần tử ra khỏi uploader*/

function upload(select_uploader, num_file)
{
	/*Kiểm tra đối tượng file có tồn tại không*/
	if(!document.getElementById("upload_file_item_" + select_uploader + "_" + num_file)) return;

	/*hiển thị upload*/
	document.getElementById("upload_file_info_" + select_uploader + "_" +num_file).style = "display: block";

	/*tạo form và file để upload*/
 	obj_target = document.getElementById("upload_file_msg_" + select_uploader + "_" + num_file );
	
	loading(obj_target);				
	
	
	array_uploader[select_uploader].num_upload++;
	var formData = new FormData();
	
	/*Kiểm tra file item hiện tại có phải là image không*/
	is_image = array_uploader[select_uploader].is_image[num_file];

	/*Nếu file item đang upload là 1 image thì lấy dữ liệu từ mảng images của uploader hiện tại*/	
	if(is_image )
	{
		
			var block = array_uploader[select_uploader].images[num_file].split(";");
				
			/*Get the content type of the image  In this case "image/gif */
			var contentType = block[0].split(":")[1];
			
			
			/* get the real base64 content of the file  In this case "R0lGODlhPQBEAPeoAJosM...."*/
			var realData = block[1].split(",")[1];
				
			/* Convert it to a blob to upload */
			var blob = b64toBlob(realData, contentType);
		
			formData.append("file", blob, array_uploader[select_uploader].file_name[num_file]); 
		
	}
	else
	{

		/*nếu không phải là image thì lấy từ array_files_selected */
		formData.append("file", array_uploader[select_uploader].files[num_file]); 
	}

	
	/*Đưa hết thuộc tính trong param vào form*/
	for (var prop in array_uploader[select_uploader].params) 
	{
        /* skip loop if the property is from prototype*/
        if(!array_uploader[select_uploader].params.hasOwnProperty(prop)) continue;

		formData.append(prop, array_uploader[select_uploader].params[prop]);			
    }	

	
	

		/*BEGIN: UPLOAD FILE*/
		$.ajax({
			type:'POST',
			url: array_uploader[select_uploader].params.url,
			data:formData,
			xhr: function() 
			{
				
				var myXhr = $.ajaxSettings.xhr();
				if(myXhr.upload){
					/*myXhr.upload.addEventListener('progress',progress, false);*/
									
									
				}
				return myXhr;
			},
			cache:false,
			contentType: false,
			processData: false,
			success:function(data)
			{
				

				file_ext = "";
				file_name = ""
				file_path = "";

				str_upload_file_msg = "";				
				/*Phân tích chuỗi json trả về*/
				try {
		

					var obj = JSON.parse(data);	
						
					/*lấy phần mở rộng và tên file, đường dẫn tới file*/		
					if(obj.ext) file_ext = obj.ext;
					if(obj.name) file_name = obj.name;					
						
					file_path = file_url + file_name;
				

					/* Lấy thông tin upload file vào biến str_upload_file_msg*/
					if(obj.result != "OK")
					{
						if(obj.hasOwnProperty('msg')) str_upload_file_msg = obj.msg;
						else str_upload_file_msg = data;
					}else str_upload_file_msg = "Upload thành công";

					

				}
				catch(e) 
				{
					/*Nếu trả về không phải là json thì hiển thị lỗi*/
					str_upload_file_msg = e + ":<br>" + data;
				}				
				

				/*Đưa thông điệp upload vào upload_file_msg */
				document.getElementById("upload_file_msg_" + select_uploader + "_" + num_file ).innerHTML =  str_upload_file_msg;
	
				
				/*BEGIN: lấy nội dung file*/	
				str_file_content = "";
				
				if(array_uploader[select_uploader].params.display == true)
				{
					/* Nếu phần mở rộng là hình ảnh thì hiển thị hình*/
					if(array_image_file_ext.indexOf(file_ext.toLowerCase()) >= 0) str_file_content = "<img src='" + file_path + "' id='file_" + select_uploader + "_" + num_file+ "'>";
					else
					{		
						/*	Nếu không phải ảnh thì nội dung hiển thị sẽ là link đến file vừa upload */											
						str_file_content = "<span id ='file_" + select_uploader +  "_" + num_file + "'><a href ='" + file_path + "'>" + array_uploader[select_uploader].files[num_file].name + "</a>";
					}
				
					/*Đưa nội dung file hộp upload_file_content*/
					document.getElementById("upload_file_content_" + select_uploader + "_" + num_file).innerHTML = str_file_content;					
				}else
				{
						document.getElementById("upload_file_content_" + select_uploader + "_" + num_file).innerHTML = "";					
				}			
				/*END: lấy nội dung file*/		


					
				/*BEGIN: Lấy tên file trả về từ server và kiểm tra đã upload xong hết file chưa */
				str_id_object_save_value = array_uploader[select_uploader].params.value;
				if(array_uploader[select_uploader].params.multiple != "multiple")
				{
					 document.getElementById(str_id_object_save_value).value = file_name;
					 array_uploader[select_uploader].num_uploaded = 1;					
					 
					 /* gọi hàm done*/					 
					 upload_file_done(select_uploader);			
				}
				else
				{
					if(file_name !="")
					{
						/*Nếu upload nhiều file thì cộng dồn giá trị */
						if(document.getElementById(str_id_object_save_value).value != "") document.getElementById(str_id_object_save_value).value += String.fromCharCode(7);
					
	
						document.getElementById(str_id_object_save_value).value += file_name + String.fromCharCode(8) + array_uploader[select_uploader].file_name[num_file];
					}
					
					/*Tăng số file đã upload của uploader hiện tại lên 1*/
					array_uploader[select_uploader].num_uploaded++;					
						
					/*Nếu số file đã upload bằng số file cần upload thì báo upload hoàn thành*/	
					if(array_uploader[select_uploader].num_uploaded == array_uploader[select_uploader].num_upload)
					{
						upload_file_done(select_uploader);			
					}
				}
				/*END: Lấy tên file trả về từ server và kiểm tra đã upload xong hết file chưa */					 
				
							
				/*Nếu có callback thì gọi hàm callback*/
				if(array_uploader[select_uploader].params.callback && array_uploader[select_uploader].params.callback != '') 
				{
					array_callback_params = {
						"file": array_uploader[select_uploader].files[num_file], 
						"data" : data, "params": array_uploader[select_uploader].params, 
						"num": num_file, "num_uploader": select_uploader 
					};
					window[array_uploader[select_uploader].params.callback](array_callback_params);
				}
				/*End: Callback*/
			},
				
			error: function(data){
				console.log(data);
			}
		});
		/*END: UPLOAD FILE*/
	
}



function start_upload(tmp_num_uploader)
{
	/*đặt lại số file cần upload*/
	array_uploader[tmp_num_uploader].num_upload = 0;
	
	/*bắt đầu upload từ vị trí num_last đến tổng số file đã chọn*/	
	position_file_start_upload = array_uploader[tmp_num_uploader].num_last +	array_uploader[tmp_num_uploader].num_selected;
	for(k = array_uploader[tmp_num_uploader].num_last; k< position_file_start_upload; k++)
	{
		upload(tmp_num_uploader, k);	
	}
	
	return array_uploader[tmp_num_uploader].num_upload;
	
}

function resize_image(image, max_size)
{
	var canvas=document.createElement("canvas");
	var context=canvas.getContext("2d");
	
	if(max_size === undefined) max_size = 1800;		  

	width = image.width;
	height = image.height;
	if (width > height) 
	{
		if (width > max_size) {
			height *= max_size / width;
			width = max_size;
		}
					 
	}
	else
	{
		if (height > max_size) 
		{
			width *= max_size / height;
			height = max_size;
		}
	}
						
	canvas.width= width;
	canvas.height= height;
	context.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);
	
	return  canvas.toDataURL("image/" + image.ext);
	
	return  canvas.toDataURL("image/jpeg");
			

	
}

function get_file_item(n_u, n_f_i_u, file_type, file_path, file_name, upload_status)
{
	/*n_u: num uploader, n_f_i_u: num file in uploader*/
	/*tạo biến num file id = num uploader _ num file in uploader*/
	n_f_id = n_u + "_" + n_f_i_u;
	
	if(file_name === undefined || file_name == "" ) file_name = "File";
	
	str_file_content = "";
	if( file_path !== undefined && file_path != "") 
	{
		if(file_type == "image") str_file_content = "<img src = '" + file_path + "' id = 'upload_file_img_" + n_f_id + "'>";
		else str_file_content = "<div class ='upload_file_content_link'><a href = '" + file_path + "' id = 'upload_file_link_" + n_f_id + "'>" + file_name + "</a></div>";
	}
	str_upload_file_content = "<div id='upload_file_content_" + n_f_id + "' class = 'upload_file_content' >" + str_file_content + "</div>";
	
	
	/*Hiển thị tên file khi chọn file để upload*/
	str_upload_file_name = "";
	if(array_uploader[n_u].show_file_name == true) str_upload_file_name   = "<span class = 'upload_file_name' id = 'upload_file_name_" + n_f_id + "'></span>";	
	
	
	str_upload_file_msg 	= "<span class = 'upload_file_msg'  id = 'upload_file_msg_" + n_f_id + "'></span>";	

	str_upload_file_info_style = "";
	str_upload_status = "status = \"\"";
	if( upload_status !== undefined || upload_status === true || str_upload_file_name == "" )
	{
		str_upload_status = "status = \"true\"";
	 	str_upload_file_info_style = "style ='display: none'";
	}
	str_upload_file_info  = "<div class = 'upload_file_info'  id = 'upload_file_info_" + n_f_id + "' " + str_upload_file_info_style +">" + str_upload_file_name + str_upload_file_msg +"</div>";	
			
	/*Tạo file item*/
	str_file_item = "<div id = 'upload_file_item_" + n_f_id + "' class = 'upload_file_item' file_type = '" + file_type +"' " + str_upload_status+ " u ='" + n_u + "' n='" + n_f_i_u + "'>";
	
	/*Nếu upload nhiều hình thì có mục xóa*/
	str_file_item_del = "<a class ='upload_file_remove' href = 'javascript:void(0)' id='upload_file_del_" + n_f_id + "'>X</a>";			
	if(array_uploader[n_u].params.multiple == "multiple") str_file_item += str_file_item_del;		
	
	
	str_file_item += str_upload_file_content;
	str_file_item += str_upload_file_info;	

	str_file_item += "</div>";	
	return str_file_item;
}

/* BEGIN: **********************/
function check_file(num_uploader, num_file, file, params)
{

	/*lấy phần mở rộng của file*/
	file_extension = file.name.split('.').pop();
	
	/* kiểm tra phần mở rộng của file có có trong mảng params.array_ext: là những file được upload*/
	if (array_uploader[num_uploader].params.array_ext.indexOf(file_extension)<0) 
	{
    	alert("Invalid file. Please select files " + array_uploader[num_uploader].params.ext ); 
    	return;
  	}
	/*END: Kiểm tra đuôi file có hợp lệ không*/
	
	/* lấy loại file*/
	file_type = file.type;
	
	/* kiểm tra file có phải là hình ảnh không*/	
	is_image = array_file_type_image.includes(file_type);


	/*lấy file size theo đơn vị Mb*/
	file_size =  parseFloat(file.size).toFixed(2);
	file_size = file_size/(1048576); 
	
	
	/* nếu file đã chọn không phải là image thì kiểm tra kích thước file*/	 
	if(!is_image)
	{
				
		/*Kiểm tra file size*/
		if(file_size > array_uploader[num_uploader].params.size)
		{
			/* Nếu lớn hơn size quy ước thì hiển thị thông báo*/
			alert("File: " + file.name + " is too big. Please select file under " + array_uploader[num_uploader].params.size + "M");
			return;
		}
		/*Kiểm tra file size*/
			
	}
	/* nếu file đã chọn không phải là image thì kiểm tra kích thước file*/	 	
	

	/*Nếu tên file hợp lê và kích thước cho phép thì lấy thông tin file*/
	/*BEGIN: Lấy thông tin file*/
	
	
	/*Đưa hộp chứa thông tin file vào upload_container*/
	if(array_uploader[num_uploader].params.multiple == "multiple")
	{


	
		/*lấy số thứ tự của file trong uploader hiện tại*/
		num_file_in_uploader = array_uploader[num_uploader].num_file;


		/*lấy số id của file trong uploader hiện tại */
		num_file_id = num_uploader + "_" + num_file_in_uploader;
	
		
		/*tạo chuỗi HTML chứa thông tin file*/
		str_file_item_HTML = get_file_item(num_uploader, num_file_in_uploader, file_type);		
		document.getElementById(array_uploader[num_uploader].params.show).innerHTML += str_file_item_HTML;
		 
		$(".upload_file_remove").on('click', function (e){	upload_file_remove_file_item($(this));	});

		/*Tăng tổng số file  trong uploader lên 1*/
		array_uploader[num_uploader].num_file++;
		
		/*Tăng số file đã chọn trong uploader lên 1*/
	 	array_uploader[num_uploader].num_selected++;
	}
	else
	{

		num_file_in_uploader = 0;
		array_uploader[num_uploader].num_selected = 1;
		array_uploader[num_uploader].num_file = 1;

		/*lấy số id của file trong uploader hiện tại */
		num_file_id = num_uploader + "_" + 0;

		/*tạo chuỗi HTML chứa thông tin file*/
		str_file_item_HTML = get_file_item(num_uploader, 0, file_type);		
		
		document.getElementById(array_uploader[num_uploader].params.show).innerHTML = str_file_item_HTML;		


	}
	/*END: Lấy thông tin file*/

	if(params.hasOwnProperty('uploader_obj'))
	{
		params.uploader_obj.num_selected = array_uploader[num_uploader].num_selected;
		console.log("số: " + params.uploader_obj.num + ":" + params.uploader_obj.num_selected);
			 
	}


	/*Đưa loại file vào file item hiện tại*/
	array_uploader[num_uploader].is_image[num_file_in_uploader] = is_image;
	array_uploader[num_uploader].file_name[num_file_in_uploader] =  file.name;	

	/* tăng số file đã chọn của toàn trang lên 1*/
	window.num_file_selected++;
	
	/*Nếu không phải là hình ảnh thì hiển thị tên file*/
	if(!is_image)
	{
		if(document.getElementById("upload_file_name_"+ num_file_id)) document.getElementById("upload_file_name_"+ num_file_id).innerHTML = file.name;

						
		/* đưa file và tham số vào mảng file đã chọn*/
		array_uploader[num_uploader].files[num_file_in_uploader] = file;

		/*Xóa dòng đang xử lý*/
		document.getElementById("upload_file_msg_"+ num_file_id).innerHTML = "";
		
		/* nếu có tự động upload thì upload file*/	
		if(array_uploader[num_uploader].params.auto == true) upload(num_uploader, num_file_in_uploader);
		return;
	

		param_callback_before = {"params": array_uploader[num_uploader].params, "num" : num_file, "file" : file, "width" : image_data.width, "height" : image_data.height};
		if(array_uploader[num_uploader].params.callback_before && typeof array_uploader[num_uploader].params.callback_before == 'function')
		array_uploader[num_uploader].params.callback_before(param_callback_before);
			 
	}
	else
	{
		
		/*Nếu là file hình ảnh thì resize và hiển thị hình ảnh*/
		
		/*Hiển thị thông điệp đang xử lý*/
		loading(document.getElementById("upload_file_msg_"+ num_file_id));

		/*BEGIN: Đọc nội dung ảnh để giảm kích thước nếu size quá lớn, và hiển thị hình ảnh  */		
		var fileReader = new FileReader();
		fileReader.onload = function (event) 
		{

			/*BEGIN: tạo đối tượng hình ảnh để chứa dữ liệu từ file*/
			var image = new Image();
			image.onload=function()
			{
				
				/*Sau khi đọc xong dữ liệu hình ảnh thì xử lý giảm kích thước hình ảnh*/
				image_data = resize_image(image);

				/*tạo đối tượng img*/
				var a_img = document.createElement("img");
				a_img.src = image_data;
				a_img.id = "upload_file_img_"+num_uploader + "_" + image.num_file_in_uploader;				
				
				/*đưa đối tượng img vào thẻ div chứa hình ảnh*/
				document.getElementById("upload_file_content_" + image.id).appendChild(a_img);
				
				if(document.getElementById("upload_file_name_" + image.id)) document.getElementById("upload_file_name_" + image.id).innerHTML += image.file_name;
				
				/*Xóa dòng đang xử lý*/
				document.getElementById("upload_file_msg_"+ image.id).innerHTML = "";
				
				
				/*Lưu dữ liệu hình ảnh vào mảng images của uploader hiện tại*/
				array_uploader[num_uploader].images[image.num_file_in_uploader] = image_data;	
	
				/*Kiểm tra có yêu cầu gọi callback không*/
				if(array_uploader[num_uploader].params.callback_before !="")
				{	
					/*Kiểm tra có tồn tại hàm callback before không*/
					if (typeof window[array_uploader[num_uploader].params.callback_before] === "function")
					{
						param_callback_before = {"params": array_uploader[num_uploader].params, "num" : num_file, "file" : file, "width" : image_data.width, "height" : image_data.height};
						window[array_uploader[num_uploader].params.callback_before](param_callback_before);
					}
					else
					{
						alert("Không tồn tại hàm: " + array_uploader[num_uploader].params.callback_before);
					}
					
				}


				/* nếu có tự động upload thì upload file*/	
				if(array_uploader[num_uploader].params.auto == true) upload(num_uploader, num_file_in_uploader);
				return;

				
			};
			
			/*BEGIN: Đưa dữ liệu file vào đối tượng hình ảnh*/
			image.id = fileReader.id;			
			image.num_file_in_uploader = fileReader.num_file_in_uploader;
			image.file_name = fileReader.file_name;
			image.ext = fileReader.ext;
			image.src = event.target.result;
			

		};
		
	
		fileReader.id = num_file_id;
		fileReader.num_file_in_uploader = num_file_in_uploader;		
		fileReader.file_name = file.name;
		fileReader.ext = file_extension;		
		
		
		fileReader.readAsDataURL(file);
		/*END: Đọc nội dung file*/

		
	}
		
		
	return;	
}/*end: function check_file()*/
/***********************/



/*mảng lưu số file đã chọn*/
array_files_selected  = [];

/*mảng lưu số file đã upload*/
array_files_uploaded = [];


/*mảng lưu số uploader hiện có, số lần gọi hàm upload_file()*/
total_num_uploader = 0;

/*mảng lưu thông tin các file trong các uploader*/
var array_uploader = [];

var num_file_uploaded = 0;
var num_file_selected = 0;

var array_image_file_ext = ["jpeg","jpg", "gif", "png", "apng", "svg", "bmp", "ico"];
					
/* mảng lưu các tham số sau mỗi lần gọi hàm upload_file()*/
var array_params  = [];

var array_file_type_image = ['image/gif', 'image/jpeg', 'image/png'];
function select_file_to_upload(selector_id, params)
{
	
	
	/*Nếu người dùng không truyền tham số thì khởi tạo tham số*/
 	if (params == undefined) params = {};
	  
	/* tăng số lần gọi hàm upload_file()*/	
	total_num_uploader++;
	params.num_uploader = total_num_uploader;

	if(total_num_uploader == 1) upload_file_css();
 	

	/* Nếu không có tham số url thì mặc định sẽ là */
	if(!params.hasOwnProperty('url')) params.url = upload_url;

	/*lấy đối tượng để hiển thị thông tin file trước khi upload và hiển thị kết quả sau khi upload*/
	if(!params.hasOwnProperty('show')) params.show = "uploader_" + params.num_uploader;

	/*nếu chưa có đối tượng folder*/
	if(!params.hasOwnProperty('folder')) params.folder = "";

	/*Kiểm tra có thuộc tính upload nhiều file không, nếu không thì chỉ cho upload 1 file*/
	if(!params.hasOwnProperty('multiple')) params.multiple = "";

	/*Kiểm tra có thuộc tính kích thước tối đa không, nếu không có thì để mặc định là 2M*/
	if(!params.hasOwnProperty('size') || (isNaN( params.size)) ||  (params.size == 0) ) params.size = 2;


	/*lấy phần mở rộng file cho phép upload, nếu không có thì mặc định sẽ là hình ảnh*/
	if(!params.hasOwnProperty('ext')) params.ext = "";
	if(params.ext == "") params.ext = "jpeg,jpg,gif,png,bmp,ico";

	
	
	/*lấy mảng file mở rộng từ chuỗi, loại bỏ các khoảng trắng*/
	array_ext = params.ext.split(",");
	for(tmp_num =0; tmp_num< array_ext.length; tmp_num++) array_ext[tmp_num] = array_ext[tmp_num].trim();
	params.array_ext = array_ext;

	/*tạo file hidden để chọn file*/
	params.selector = $("#" +selector_id).attr('id');


	/* kiểm tra uploader có cho hiển thị tên file đã chọn không*/
	if(!params.hasOwnProperty('show_file_name')) params.show_file_name = true;
	

	/* Kiểm tra thuộc tính tự động upload, nếu không có thì để mặc định bằng true*/	
	if(!params.hasOwnProperty('auto')) params.auto = false;

	/*Kiểm tra thuộc tính display, nếu không có thì mặc định display sẽ là true*/
	if(!params.hasOwnProperty('display')) params.display = true;

	/*Kiểm tra thuộc tính done, nếu không có thì mặc định display sẽ là rỗng*/
	if(!params.hasOwnProperty('done')) params.done = "";
	
	/*Kiểm tra có tham số callback_before không*/
	if(!params.hasOwnProperty('callback_before')) params.callback_before = "";
					
	/*Kiểm tra khi gọi hàm có tham số value: dùng để lưu tên file từ server trả về không*/
	if(!params.hasOwnProperty('value'))
	{
		
		
		/*Nếu người dùng không chỉ ra đối tượng lưu giá trị, thì tự động tạo ra đối tượng lưu giá trị*/
		params.value = "file_value_" + params.num_uploader;
		
		
		if(!document.getElementById(params.value))
		{
			$("<input type='hidden' name ='file' id ='" + params.value +"'>").insertAfter("#" + params.selector);	
		}
	}
	else
	{
		/**/
		if(!document.getElementById(params.value)) alert("Không tìm thấy đối tượng id = '" + params.value +"' để lưu giá trị upload");
		
	}
	
			
	/*tạo mảng chứa thông tin uploader hiện tại: số file đã chọn, số file cần upload, số file đã upload, mảng các file, mảng các hình ảnh, và tham số*/
	/*num_item: số file đang có trong uploader, num_selected: Tổng số file đã chọn, num_last: tổng số file đã chọn lần trước*/
	/*num_upload: số file cần được upload, num_uploaded: số file đã được upload*/
 	array_uploader[params.num_uploader] = {"num_file": 0, "num_last" : 0, "num_selected" : 0, "num_upload" : 0, "num_uploaded" : 0, files : [], params: params, images: []};	
 	array_uploader[params.num_uploader].selector = params.selector;
	array_uploader[params.num_uploader].is_image = [];
	array_uploader[params.num_uploader].file_name = [];
	array_uploader[params.num_uploader].value = params.value;
	array_uploader[params.num_uploader].show_file_name = params.show_file_name;


	/*Nếu chưa có đối tượng để hiển thị thông tin file thì thêm vào trước nút upload*/
	if(!$("#" +params.show).length)  $("<div id ='" + params.show +"' class = 'upload_file_container'></div").insertBefore("#"+params.selector);

	
	/*tạo form để upload*/
	var str_form = '<form method="post" action="" id="form_upload_' + params.num_uploader + '" enctype="multipart/form-data"></form>';
	$(str_form).appendTo('body');

		
 	
	/* đưa hidden upload file vào form*/	
	var str_hidden_file =  '<input hidden="true" style = "display: none" id="hidden_file_upload_' + params.num_uploader + '" type="file" name="file" ' +  params.multiple +'>';
	$(str_hidden_file).appendTo('#form_upload_' + params.num_uploader);


	/* Xử lý khi người dùng chọn file */
	$('#hidden_file_upload_' + params.num_uploader).change(function (e) 
	{
			
		 
			
			
		/* lấy thông tin các file đã chọn vào mảng array_files */
		var selected_files = document.getElementById("hidden_file_upload_" + params.num_uploader);
		
		/* đưa các file đã chọn vào mảng array_files  */
		array_files  = selected_files.files;
			
		/* lấy số file đã chọn */
		num_file = array_files.length;

		

		/*Kiểm tra file đã chọn: kích thước, loại file, ...,và hiển thị thông tin trước khi upload */
		for (var nfile = 0; nfile < num_file; nfile++)	check_file(params.num_uploader, nfile, array_files[nfile], params);					
		

				
			
		e.preventDefault();
	
	});
 		
		
	/*kiểm tra có tồn tại đối tượng để tạo sự kiện onclick*/
	if($("#" +selector_id).length)
	{
		/* kiểm tra có sự kiện onclick*/
		$("#" +selector_id).on('click', function (e) 
		{
			$("#hidden_file_upload_" + params.num_uploader).click();
			e.preventDefault();
		});
			
	}
	/*end if($(this).length)*/
	/*kiểm tra có tồn tại đối tượng*/
		
	
}

function upload_file_done(num_uploader_done)
{
	/*Lưu giữ lại số file đã chọn vào biến num_last*/
	if(array_uploader[num_uploader_done].params.multiple != "multiple") array_uploader[num_uploader_done].num_last = 0;
	else array_uploader[num_uploader_done].num_last = array_uploader[num_uploader_done].num_file;

	str_function_done = array_uploader[num_uploader_done].params.done;
	if(str_function_done  != "")
	{
		try {
			window[str_function_done](num_uploader_done); 
		}catch(e)
		{
			alert("Lỗi:" + e);
		}
	}
}


$.fn.upload_file = function(params)
{
	
	/*gọi hàm chọn file để upload*/
	object_id = $(this).attr('id');
	select_file_to_upload(object_id, params);
	
	
};


function upload_file_css()
{
	/*Khởi tạo css*/
	var str_upload_file_css  = ".upload_file_container{ border: solid 0px;	width: auto;	display: table; width:100%}";
	str_upload_file_css += ".upload_file_item	{border: solid 6px green; height: 120px; min-width: 150px; width: auto;float: left;position: relative;margin-right: 20px;margin-bottom: 20px;border-radius: 10%;box-sizing: border-box;overflow: hidden;display: table;max-width: 100%;}";
	str_upload_file_css += ".upload_file_remove{	top: 0;	right: 0;	position: absolute;	float: right;	margin: -11px -10px;	background-color: white;	color: red !important;	padding: 5px;	border: solid 5px green;	border-radius: 30%;}";
	str_upload_file_css += ".upload_file_item .upload_file_content { height: 110px; max-height: 110px; width: auto; min-width: 110px; margin-bottom: 5px; }  .upload_file_item .upload_file_content  img{ 	height: 115px; }";
	str_upload_file_css += ".upload_file_content_link { text-align: center; width: 100%; padding-top: 30px;}";
	
	str_upload_file_css += ".upload_file_info{ min-height: 30px;  padding: 3px; display: table; font-weight: bold; color: yellow; position: absolute; top: 50px; background: rgba(34, 24, 64, 0.8); width: 150px; left: 0; opacity: 1; color: yellow; }";
	str_upload_file_css += ".upload_file_name{ font-weight: bold; color: yellow; padding: 5px; width: 100%; display: block; text-align: center;  }";
	str_upload_file_css += ".upload_file_msg{ padding: 5px; font-weight: bold; color: yellow;  width: 100%; display: block; text-align: center;} .upload_file_msg img{ height: 30px; vertical-align: middle;}";
	str_upload_file_css += ".upload_file_link	{ margin-left: 10px; margin-right: 10px;  }";

	$('head').append('<style type="text/css">' + str_upload_file_css +'</style>');
	
}	




function drag(params)
{
		var obj = document.querySelector("#" + params.id_target);
		obj.style.cursor = "pointer"; 
	   	var active = false;
		var currentX;
		var currentY;
		var initialX;
		var initialY;
		var xOffset = 0;
		var yOffset = 0;
	
		obj_parent = obj.parentElement;
		obj_parent.style.display = "flex";
		obj_parent.addEventListener("touchstart", dragStart, false);
		obj_parent.addEventListener("touchend", dragEnd, false);
		obj_parent.addEventListener("touchmove", drag_item, false);

		obj_parent.addEventListener("mousedown", tooggle_drag, false);
		obj_parent.addEventListener("mouseout", dragEnd, false);		
		
		obj_parent.addEventListener("mousemove", drag_item, false);

		function tooggle_drag(e)
		{
			if (e.target === obj) { 
		  		if(!active) { dragStart(e) }
				else { dragEnd(e); }
			}		
		}
		function dragStart(e) {
		  if (e.type === "touchstart") {	initialX = e.touches[0].clientX - xOffset;	initialY = e.touches[0].clientY - yOffset;  } 
		  else {	initialX = e.clientX - xOffset;	initialY = e.clientY - yOffset;  }
	
		  if (e.target === obj) { active = true;  obj.style.cursor = "move" }
		}
		function drag_item(e) {
		  if (active) {
		  
			e.preventDefault();
		  
			if (e.type === "touchmove") {
			  currentX = e.touches[0].clientX - initialX;
			  currentY = e.touches[0].clientY - initialY;
			} else {
			  currentX = e.clientX - initialX;
			  currentY = e.clientY - initialY;
			}
	
			xOffset = currentX;
			yOffset = currentY;
	
			if(params.vertical &&  params.vertical == true) currentX = 0;
			setTranslate(currentX, currentY, obj);		
			
			if(params.callback && typeof params.callback == 'function') params.callback({"params": params, "x" : currentX, "y" : currentY, "e" : obj});

		  }
 	   }

		function setTranslate(xPos, yPos, el) 
		{
			el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";

		}

		function dragEnd(e) {
		  initialX = currentX;
		  initialY = currentY;
	

		  	active = false;
			obj.style.cursor = "pointer" 
		}
	
}/*end: funtion drag()*/

</script><script> var debug = ''; var array_js_data = []; var js_var = {};  num_js_data = 0;var template_url = "http://danagon.khietlong.vn/layout/common/green/"; var file_url = "http://danagon.khietlong.vn/files/danagon/"; var upload_url = "http://danagon.khietlong.vn/file2/upload.html"; var upload_code_url = "http://danagon.khietlong.vn/code/upload.html";  mode = "dev"; var debug = ""; </script><script>$(document).ready(function(){  run_js(); });</script><style type="text/css">.upload_file_container{ border: solid 0px;	width: auto;	display: table; width:100%}.upload_file_item	{border: solid 6px green; height: 120px; min-width: 150px; width: auto;float: left;position: relative;margin-right: 20px;margin-bottom: 20px;border-radius: 10%;box-sizing: border-box;overflow: hidden;display: table;max-width: 100%;}.upload_file_remove{	top: 0;	right: 0;	position: absolute;	float: right;	margin: -11px -10px;	background-color: white;	color: red !important;	padding: 5px;	border: solid 5px green;	border-radius: 30%;}.upload_file_item .upload_file_content { height: 110px; max-height: 110px; width: auto; min-width: 110px; margin-bottom: 5px; }  .upload_file_item .upload_file_content  img{ 	height: 115px; }.upload_file_content_link { text-align: center; width: 100%; padding-top: 30px;}.upload_file_info{ min-height: 30px;  padding: 3px; display: table; font-weight: bold; color: yellow; position: absolute; top: 50px; background: rgba(34, 24, 64, 0.8); width: 150px; left: 0; opacity: 1; color: yellow; }.upload_file_name{ font-weight: bold; color: yellow; padding: 5px; width: 100%; display: block; text-align: center;  }.upload_file_msg{ padding: 5px; font-weight: bold; color: yellow;  width: 100%; display: block; text-align: center;} .upload_file_msg img{ height: 30px; vertical-align: middle;}.upload_file_link	{ margin-left: 10px; margin-right: 10px;  }</style><script type="text/javascript" charset="UTF-8" src="./Quảng cáo online - Website Danagon_files/common.js.download"></script><script type="text/javascript" charset="UTF-8" src="./Quảng cáo online - Website Danagon_files/util.js.download"></script><script type="text/javascript" charset="UTF-8" src="./Quảng cáo online - Website Danagon_files/AuthenticationService.Authenticate"></script></head>
<body><div><div id="mode" style="width:100%; height: auto; background: green; color: white; text-align: center">Chú ý: Đây là phiên bản không chính thức! </div></div>
	<!-- Begin of wrapper -->
	<div id="wrapper"> 
		
<!--BEGIN: HEADER -->
<div id="header">
        
	<!-- BEGIN: HEADER1-->
	<div id="header1">
		<!-- <span>Language: </span>
		<select>
			<option value="vietnam" selected>Tiếng việt</option>
			<option value="thai">Thái Lan</option>
			<option value="phap">Pháp</option>
			<option value="lao">Lào</option>
			<option value="phap">Pháp</option>
			<option value="anh">Tiếng Anh</option>    
		</select>       -->     

		<!--
		<a href = "#" class = "donate">
			<img src = "/layout/common/green/images/donate_ic.jpg" /> <span>Donate</span>
		</a>-->
        
	</div>
	<!-- END: HEADER1-->
    
    <!-- BEGIN: HEADER2-->
	<div id="header2">
				<a href="http://danagon.khietlong.vn/cart2/index.html"><img src="./Quảng cáo online - Website Danagon_files/cart-ic1.jpg"></a>
		<a href="http://danagon.khietlong.vn/member/info.html" class="link1">truongbahanguyen@gmail.com</a> <span style="color:#FFF">/</span>  <a href="http://danagon.khietlong.vn/signout.html" class="link1">Đăng xuất</a>	</div>                  
	<!-- END: HEADER2-->
	
</div>
<!--BEGIN: HEADER --> 
		<br>
<b>Notice</b>:  Undefined variable: page in <b>/home/content/85/10168985/html/webcloud/layout/common/green/items/elements/layout/5banner.php</b> on line <b>10</b><br>

<!--BEGIN: BANNER -->
<div id="banner">
	<div id="banner1"><img src="./Quảng cáo online - Website Danagon_files/logo.png"></div>  
	<div id="banner2">
        <img src="./Quảng cáo online - Website Danagon_files/banner1.png" id="banner_top">	</div>    
</div>
<!--BEGIN: BANNER --> 
		<!--BEGIN: MENU -->
<div id="menu">
             
	<!-- BEGIN: MENU1-->
	<div id="menu1">
		<ul>
			<li id="menu_home"><a href="http://danagon.khietlong.vn/home">Trang chủ</a></li>
			<li id="menu_product"><a href="http://danagon.khietlong.vn/product.html">Mua sắm</a></li>
			<li id="menu_service"><a href="http://danagon.khietlong.vn/service.html">Dịch vụ</a></li>
			<li id="menu_news"><a href="http://danagon.khietlong.vn/news.html">Tin tức</a></li> 
			<li id="menu_article"><a href="http://danagon.khietlong.vn/article.html">Bài viết</a></li> 
			<li id="menu_location"><a href="http://danagon.khietlong.vn/place.html">Địa điểm</a></li>
			<li id="menu_organization"><a href="http://danagon.khietlong.vn/organization.html">Tổ chức</a></li>
			<!-- <li id = "menu_people"><a href="/people.html">Người</a></li> -->
		</ul>
	</div>
	<!-- END: MENU1-->
             
	<!-- BEGIN: MENU2-->        
	<div id="menu2">
		<div class="icon">
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" onclick="show_menu()"><img src="./Quảng cáo online - Website Danagon_files/icon-menu.png"></a>
		</div>
	</div> 
	<!-- END: MENU2-->
  
</div>
<!--BEGIN: MENU -->
<script>
	
	/*Thêm class active khi chọn menu*/
		var str_page = "menu_";
	if(document.getElementById(str_page)) document.getElementById(str_page).className += " " + "active"; 
</script> 
		<!-- BEGIN: CONTENT -->
<div id="content">
<div class="col20 left" id="content1"><ul id="menu3">
    <li><a href="http://danagon.khietlong.vn/post2/friends_post.html">Bài đăng của bạn bè</a></li>	
    <li><a href="http://danagon.khietlong.vn/post2/my.html">Bài viết</a></li>
    <li><a href="http://danagon.khietlong.vn/order2/my.html">Đơn hàng đến</a></li>
    <li><a href="http://danagon.khietlong.vn/order2/history.html">Lịch sử mua hàng</a></li>
    <li><a href="http://danagon.khietlong.vn/friend/index/friends.html">Bạn bè</a></li>
    <li><a href="http://danagon.khietlong.vn/message/index.html">Tin nhắn</a></li>
    <li><a href="http://danagon.khietlong.vn/notify">Thông báo</a></li>
    <li><a href="http://danagon.khietlong.vn/member/info.html">Cài đặt thông tin</a></li>
    <li><a href="http://danagon.khietlong.vn/member/setting/profile_picture.html">Cài đặt hình đại diện</a></li>
    <li><a href="http://danagon.khietlong.vn/user_person/index.html">Danh bạ cá nhân</a></li>
    <li><a href="http://danagon.khietlong.vn/user_org/index.html">Tổ chức</a></li>          
    <li><a href="http://danagon.khietlong.vn/user_place/index.html">Cài đặt địa chỉ</a></li>          
</ul></div><div class="col80 right" id="content2"><h1>Thông Tin Tổ Chức </h1>

<h2>Tên tổ chức: Hà Nguyên IT</h2>    
    <!--BEGIN: Menu tổ chức-->
	<div id="menu_org">	
        <ul class="col100" id="menu_org_content">
        	<li><a href="http://danagon.khietlong.vn/user_org/5f4082d936a1a8841fT3GT.html?&amp;page=info">Thông tin</a></li>
        <li><a href="http://danagon.khietlong.vn/user_org/5f4082d936a1a8841fT3GT.html?&amp;page=post&amp;type=article">Bài viết</a></li><li><a href="http://danagon.khietlong.vn/user_org/5f4082d936a1a8841fT3GT.html?&amp;page=post&amp;type=news">Tin tức</a></li><li><a href="http://danagon.khietlong.vn/user_org/5f4082d936a1a8841fT3GT.html?&amp;page=post&amp;type=service">Dịch vụ</a></li><li><a href="http://danagon.khietlong.vn/user_org/5f4082d936a1a8841fT3GT.html?&amp;page=post&amp;type=product">Sản phẩm</a></li>			<li><a href="http://danagon.khietlong.vn/user_org/5f4082d936a1a8841fT3GT.html?&amp;page=department">Phòng ban</a></li>
			<li><a href="http://danagon.khietlong.vn/user_org/5f4082d936a1a8841fT3GT.html?&amp;page=persons">Danh bạ</a></li>
		</ul>
	</div>
    <!--END: Menu tổ chức-->    
    
    <h1>Nhập Tin tức</h1>





<form id="form_insert" method="POST" action="http://danagon.khietlong.vn/user_org/save_post.html">
		
<div class="form-row">
        <div class="form-row-label">Nhóm Tin tức:</div>   
        <div class="form-row-input"><select name="data[uid_post_cat]" id="uid_post_cat" autocomplete="on" style="display: none;"><option value="" selected="">...</option><option value="5f317446b17261919JQwxq">Tin quảng cáo</option><option value="5f31745de3f898120fI0qR">Tin tuyển dụng</option><option value="5f3174c20d1c53321zvyfh">Thông báo</option><option value="5f356e67815ba1244OKNXx">Tuyển dụng kế toán</option><option value="5f356f26935644345PAwTM">Tuyển dụng kế toán</option></select><div class="autocomplete_frame" title="" id="autocomplete_frame_uid_post_cat" style=";"><input type="hidden" name="uid_post_cat_text" id="uid_post_cat_text" value="..."><a class="autocomplete_selector" id="autocomplete_selector_uid_post_cat" autocomplete_id="uid_post_cat"><span id="autocomplete_selectbox_text_uid_post_cat">...</span><div><i></i></div></a><div class="autocomplete_data" id="autocomplete_drop_uid_post_cat" style=""><div class="autocomplete_search"><input type="text" autocomplete="off" placeholder="" class="autocomplete_search_input" id="autocomplete_search_uid_post_cat" autocomplete_id="uid_post_cat"><div class="autocomplete_loader" id="autocomplete_loader_uid_post_cat" style="display: none"></div></div><div id="autocomplete_data_uid_post_cat" class="autocomplete_data_list"><a class="autocomplete_data_item" href="javascript:void(0)" value=""><span class="autocomplete_text">...</span></a><a class="autocomplete_data_item" href="javascript:void(0)" value="5f317446b17261919JQwxq"><span class="autocomplete_text">Tin quảng cáo</span></a><a class="autocomplete_data_item" href="javascript:void(0)" value="5f31745de3f898120fI0qR"><span class="autocomplete_text">Tin tuyển dụng</span></a><a class="autocomplete_data_item" href="javascript:void(0)" value="5f3174c20d1c53321zvyfh"><span class="autocomplete_text">Thông báo</span></a><a class="autocomplete_data_item" href="javascript:void(0)" value="5f356e67815ba1244OKNXx"><span class="autocomplete_text">Tuyển dụng kế toán</span></a><a class="autocomplete_data_item" href="javascript:void(0)" value="5f356f26935644345PAwTM"><span class="autocomplete_text">Tuyển dụng kế toán</span></a><div value="autocomplete_no_data"></div></div></div></div></div>
</div>
<div class="form-row">
        <div class="form-row-label">Tiêu đề:</div>   
        <div class="form-row-input"><input name="data[title]" id="title" style="width:100%;" value="" type="text">
</div>
</div>
<div class="form-row">
        <div class="form-row-label">Mã:</div>   
        <div class="form-row-input"><input name="data[code]" id="title" style="width:100%;" value="" type="text">
</div>
</div>
<div class="form-row">
        <div class="form-row-label">Mô tả:</div>   
        <div class="form-row-input"><textarea class="span20" name="data[desc]" id="desc" style="width:100%"></textarea>
<input type="hidden" name="data[url_key]" id="url_key" value=""></div>
</div>
<div class="form-row">
        <div class="form-row-label">Hình minh họa Tin tức:</div>   
        <div class="form-row-input"><input type="hidden" name="data[img]" id="file_name" width="400px" value=""><div id="uploader_1" class="upload_file_container"></div><button id="select_file" value="file" type="button"> chọn file</button>
</div>
</div>
<div class="form-row">
        <div class="form-row-label">Nội dung:</div>   
        <div class="form-row-input"><textarea class="span20" name="data[content]" id="post_content" style="width:100%;height:200px;"></textarea>
</div>
</div>
<div class="form-row">
        <div class="form-row-label">Ngày nhập:</div>   
        <div class="form-row-input"><input id="post_date" name="data[post_date]" value="26-08-2020" valid="date" autocomplete="off" type="text" class="hasDatepicker">
</div>
</div>
<div class="form-row">
        <div class="form-row-label">Địa chỉ:</div>   
        <div class="form-row-input"><span id="place_name_select">Phòng 201, Tầng 2, Công ty Cổ Phần Khiết Long, K125/12 Ngô Gia Tự, Hải Châu 1, Hải Châu, Đà Nẵng, Vietnam</span><button id="select_place" type="button" value="Đăng bài mới" onclick="show_place()"> Chọn địa chỉ</button>
<input type="hidden" id="uid_place" name="data[uid_place]" value="5e79c55e91e6e557ZN9vM"><input type="hidden" id="id_place" name="data[id_place]" value="7"></div>
</div>
<div class="form-row">
        <div class="form-row-label"></div>   
        <div class="form-row-input"><button onclick="check_form()" value="Lưu" type="button"> Lưu</button>
<input type="hidden" name="data[type]" value="news"><input type="hidden" name="data[page]" value="compose"><input type="hidden" name="data[uid_user_org]" value="5f4082d936a1a8841fT3GT"><input type="hidden" name="data[id]" value=""></div>
</div>	
</form>
<link href="./Quảng cáo online - Website Danagon_files/dialog.css" rel="stylesheet" type="text/css"><script src="./Quảng cáo online - Website Danagon_files/dialog.js.download"></script><style>


 	#dialog_place
	{
		left: 0 ;
		width: 90% !important;
		height: 90% !important;
		top: 0 ;
		overflow: hidden !important;
		display: block;

	}

	#save_button
	{
		width: 100%;
    	height: 50px;
    	font-size: 20px;
	}
	
	#form_address
	{
	    border: 0px solid yellow;
		height: auto;
		display: table;
		margin: 0px 0px 30px 0px;	
	}
	#form_address .form-row {
		margin-bottom: 0px;
	}
	
		
	#dialog_post { width: 80% !important; top: 0px }

	#dialog_place_content
	{
		width: 100%;
		height: 100%;
		overflow-y: scroll;
		display: block;
		left: 0;
	
	}

		
	@media only screen and (max-width: 760px)
  	{
		#dialog_place
		{
			width: 100% !important;
			height: 700px !important;
			left: 0;
			top: 0;
			overflow: hidden;
		}

		#dialog_place_content
		{
			width: 100%;
			height: 100%;
			overflow-y: scroll;
			display: block;
			left: 0;
		
		}
		
  }

#map
{
	width: 100%;
	height:300px	
}

#place_name
{
	width: 100%;	
}

#country
{
	width: 150px;	
}
.admin_area
{
	width: 250px;
}
.autocomplete_frame
{
	width: 250px !important;
    margin: 0px 10px 10px 0px
}

#autocomplete_frame_create_type
{
    width: 100% !important;
}


#autocomplete_frame_place
{
    width: 300px;
}
#autocomplete_frame_street
{
    width: 290px;
}

#place{
	width: 250px;	
	margin: 0px 10px 0px 0px;
}

#street{
	width: 200px;	

}

#street_number{
	width: 160px;	
	margin-right: 10px;
}
#section{
	width: 150px;	
	margin-right: 10px;	
}
#floor{
	width: 100px;	
	margin-right: 10px;	
}
#room{
	width: 100px;	
	margin-right: 10px;	
}
#des_content{
    width: 100%;
}
/* phone screen */
@media only screen and (max-width: 760px)
{

	.autocomplete_frame
	{
		width: 100% !important;
		margin: 0px 10px 10px 0px
	}

    
	#autocomplete_frame_place
    {
        width: 100%;
    }
    #autocomplete_frame_street
    {
        width: 100%;	
    }
    #street_number{
	    width: 45%;	
    }
    #section{
        width: 45% !important;
        margin-right: 0px !important;	
	
    }
    #floor{
        width: 45% !important;
	
    }
    #room{
        width: 45% !important;
        margin-right: 0px !important;	
	
    }

    

}
</style> <!-- Bản đò -->
 <script src="./Quảng cáo online - Website Danagon_files/js" async="" defer=""></script>

<script>
	
	/*Hàm Jquery chạy sau khi server load xong dữ liệu*/
	$(document).ready(function()
	{
		
		/*tạo dialog nhập địa điểm*/
		array_dialog_place = {"target": "post_place", "id": "dialog_place", "title" : "Nhập địa chỉ", "content" : "", "close": ""};
		array_dialog_place.left = "0";
		array_dialog_place.top = "auto";
		array_dialog_place.width =  "auto";
		array_dialog_place.height =  "90%";	
		dialog_place = new Dialog(array_dialog_place);

	}); 
	/* end: $(document).ready(function() */


	/*Hàm hiển thị dialog địa điểm*/
	function show_place()
	{
		/* Hiển thị dialog địa điểm */
		dialog_place.show();	
		
		/*request form nhập địa danh*/
		var url_edit_place = "http://danagon.khietlong.vn/user_place/add/";

		if(url_edit_place.indexOf("?") == -1) url_edit_place += "?";
		
		
		url_edit_place += "&uid_place=" + uid_place + "&layout=false";
		
	
		/*request form nhập*/
		$.ajax({   method: "GET",  url: url_edit_place, data: { }   }).done(
			function( form_add_place ) 
			{
				/*Đưa form nhập địa danh vào dialog*/
				//dialog_place.set({ "content": form_add_place });
				document.getElementById("dialog_place_content").innerHTML = form_add_place;
				
				/* autocomplete các đối tượng country, place, street*/
				$( "#country" ).autocomplete({"reset": true});
				$( "#create_type" ).autocomplete({"reset": true});
				$( "#place" ).autocomplete({"reset": true});
				$( "#street" ).autocomplete({"reset": true});
			
				$( ".admin_area" ).autocomplete({"reset": true});
				
				/*tạo sự kiện onchange cho select country*/
				$( "#country" ).change(function() { change_area(null)	});
		
				/*tạo sự kiện onchange cho select country*/
				$( "#country" ).change(function() {	change_country(null) });
				
				/*chọn lại cách nhập địa điểm*/
				change_create_type();

				/*tạo sự kiện click cho nút lưu*/
				$("#save_button").click(function(){
					
  					save_place();
				});
				
				
				/*tạo bản đồ*/
				initMap();

									
			}
		);
  
  		
	}
	/*end: function show_place(uid)*/
	
	/*Hàm lưu địa điểm*/
	function save_place()
	{
		/*lấy địa điểm đã chọn*/
		obj_place = document.getElementById("create_type");
		
		/*Nếu chọn 1 địa điểm sẵn có*/
		if(obj_place.value != "")
		{

			/*lấy uid địa điểm đang chọn*/
			document.getElementById("uid_place").value = obj_place.value;
			

			/*tên địa điểm*/		
			document.getElementById("place_name_select").innerHTML = obj_place.options[obj_place.selectedIndex].text;

			dialog_place.close();	
			
		}/*end: if(obj_place.value != "")*/
		else
		{
			/*Nếu người dùng chọn tạo mới thì lưu địa điểm*/
			place_data = $('#form_address').serialize() + "&layout=false";
			var str_link_save_place = "http://danagon.khietlong.vn/user_place/add.html";	


			$.post(str_link_save_place, place_data, 
				function(data, status)
				{
					try
					{
					
						var obj_place_data = JSON.parse(data);
						console.log(obj_place_data);

						/*lấy id địa chỉ đang chọn*/
						document.getElementById("uid_place").value = obj_place_data.uid;

						/*tên địa điểm*/		
						document.getElementById("place_name_select").innerHTML = obj_place_data.name;
						document.getElementById("place_name").value = obj_place_data.name;

					}
					catch(err)
					{
 						document.getElementById("place_name_select").innerHTML = err.message;
						document.getElementById("uid_place").value = "";

					}
  				  
				  	dialog_place.close();
				  
  				}
				/* end: function(data, status) */

  			);
			/* end: $.post(str_link_save_place, place_data,  */

		}
		/*end: if(obj_place.value != "")*/

	}
	/*end: function save_place()*/

</script>
<script>

	
	function reset_address()
	{
		/*Đặt lại khu vực, khu vực chứa*/
		if(document.getElementById("place_name")) document.getElementById("place_name").value = "";
		document.getElementById("place").value = "";
		
        document.getElementById("place").innerHTML = "";

		/*Đặt lại đường, số nhà*/
		document.getElementById("street").value = "";

        document.getElementById("street").innerHTML = "";

		document.getElementById("street_number").value = "";

	
	}
	function change_country()
	{
		/*đặt lại khu vực*/
		document.getElementById("list_area").innerHTML = "";
		
		/*thay đổi khu vực*/				
		change_area(null);

	}
	
	/*Hàm được gọi khi thay đổi địa dannh*/
	var url_search = "http://danagon.khietlong.vn/user_place/index.html";
	function change_area(obj)
	{
		
		country = document.getElementById("country").value;
		
		/*lấy uid và level của đối tượng vừa chọn*/
		uid_area = "";
		level_selected = 0;
		if(obj)
		{
			if(obj.value)	 uid_area = obj.value;
			if(obj.getAttribute("level")) level_selected = obj.getAttribute("level");
		}
		if(isNaN(level_selected)) level_selected = 1;
	
		/*Nếu đây là địa danh cấp 1 thì đặt lại khu vực và địa điểm*/
		if(level_selected < 2 ) reset_address();
		
		/*Kiểm tra người dùng có nhập mới không*/
		if(uid_area == "new_value_entered") return add_new_area(obj.getAttribute("id"));

		/*cập nhật lại uid_user_place*/
		document.getElementById("uid_area").value = uid_area;

		/*cập nhật url ô tìm địa chỉ*/
		url_search_street =  url_search ;
		if(url_search.indexOf("?") == -1) url_search_street += "?";
		url_search_street += "&act=search_street&country="+ country + "&uid_area="+ uid_area + "&search=";
		document.getElementById("street").setAttribute("data-url", url_search_street);
		
		
		/*cập nhật url ô tìm địa điểm*/
		url_search_place =  url_search ;
		if(url_search.indexOf("?") == -1) url_search_place += "?";
		url_search_place +=  "&act=search&country="+ country + "&uid_area="+ uid_area +"&search=";
		
		document.getElementById("place").setAttribute("data-url", url_search_place);
		document.getElementById("create_type").setAttribute("data-url", url_search_place);

		/*reset lại các selectbox street, place*/
		$( "#street" ).autocomplete({reset: true});
		$( "#place" ).autocomplete({reset: true});

		$('#create_type').find('option').remove().end().append('<option value="">Tạo mới</option>').val('');
		$( "#create_type" ).autocomplete({reset: true});
		change_create_type();


		

	
		/*begin : Lấy danh sách địa danh*/
		url_search_area =  url_search ;
		if(url_search.indexOf("?") == -1) url_search_area += "?";
		url_search_area +=  "&act=list_area&country="+ country + "&uid_area="+ uid_area +"&search=";
		$.ajax({  method: "GET",  url: url_search_area,  data: {  } }).done(function( str_select_area ) 
		{
			/*Đưa địa danh vào form	*/
			document.getElementById("list_area").innerHTML = str_select_area;

			/*cập nhật lại uid_area theo giá trị uid_area đã chọn*/
			document.getElementById("uid_area").value = uid_area;
			
			/*autocomplete các input*/
			$( ".admin_area" ).autocomplete({reset: true});
			
			/*cập nhật lại bản đồ*/
			update_map();
			
		});
		/*end : Lấy danh sách địa danh*/		
		
		
	}
	/*end: function change_area(obj)*/


	
	/*Hàm thêm mới địa danh*/	
	function add_new_area(id)
	{
		/*lấy tên địa danh, nếu loại input là SELECT thì tên địa danh là text của selectbox*/
		area_name = document.getElementById(id).value;
		if(document.getElementById(id).tagName == "SELECT") area_name = document.getElementById("autocomplete_selectbox_text_"+ id).innerHTML;

		/*lấy uid_parent của địa danh*/
		uid_parent = document.getElementById(id).getAttribute("parent");
		
		/*lấy quốc gia*/
		country = document.getElementById("country").value;
		
		/*Đưa dữ liệu lên server để lưu địa danh mới*/
		str_url_save_area = "http://danagon.khietlong.vn/user_area/add.html";
		array_data = { "data[country]": country, "data[uid_parent]": uid_parent, "data[uid_admin_area]" : "new_value_entered", "data[admin_area_text]" : area_name, "data[act]": "ajax" };
		$.ajax({
		  method: "POST",
		  url: str_url_save_area,
		  data: array_data 
		}).done(function( msg ) 
		{
			
			/*đưa chuỗi về json*/
			var obj = JSON.parse(msg);
			if(obj.area && obj.area.uid)
			{
				/*lấy uid của khu vực vừa lưu*/
				uid_area_saved = obj.area.uid;
				
				/*cập nhật lại uid_user_place*/
				document.getElementById("uid_area").value = uid_area_saved;

				/*lấy lại danh sách địa danh*/
				change_area(document.getElementById("uid_area"));
				
				
				/*cập nhật url ô tìm địa chỉ*/
				url_search_street =  url_search + "?act=search_street&country="+ country + "&uid_area="+ uid_area + "&search=";
				document.getElementById("street").setAttribute("data-url", url_search_street);

				/*cập nhật url ô tìm địa điểm*/		
				url_search_place =  url_search + "?act=search&country="+ country + "&uid_area="+ uid_area;
				document.getElementById("place").setAttribute("data-url", url_search_place);
				document.getElementById("create_type").setAttribute("data-url", url_search_place);
				
				/*reset lại các selectbox street, place*/
				$( "#street" ).autocomplete({reset: true});
				$( "#place" ).autocomplete({reset: true});
				$('#create_type').find('option').remove().end().append('<option value="">Tạo mới</option>').val('');
				$( "#create_type" ).autocomplete({reset: true});
				change_create_type();

			}		  

		});
		
		return;
	}
	/*end: function add_new_area(id)*/

	function change_create_type()
	{
		if(document.getElementById("create_type").value == "") document.getElementById("select_place_box").style.display = "";	
		else document.getElementById("select_place_box").style.display = "none";	
			
	}
	
	function submit_form()
	{
		
		/*Kiểm tra người dùng có chọn địa điểm có sẵn không*/
		if(document.getElementById("create_type").value != "") return document.getElementById("form_address").submit();
		
		if(document.getElementById("uid_area").value == "")
		{
			alert("Xin vui lòng chọn hoặc nhập khu vực");
			return;
		}
		if(document.getElementById("street").value == "")
		{
			alert("Xin vui lòng chọn hoặc nhập  đường phố");
			return;
		}

		document.getElementById("form_address").submit();
	}
	
	/*BEGIN :Phần bản đồ*/

    var map;
	var geocoder;
	var marker;
	var user_circle;
	var circle_param;
	var map_level = 6;

	/*Hàm khởi tạo bản đồ*/
	function initMap()
	{
      	
		/*tạo bản đồ*/
	    map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 17
        });

		/*tạo đối tượng marker*/
		marker = new google.maps.Marker({	map: map});
		
		/*tạo vòng tròn*/
		cirle_param = { strokeColor: '#0fbf41',	strokeOpacity: 0.8,	strokeWeight: 2, fillColor: '##7cba8e',	fillOpacity: 0.1,	radius: 10   };
		cirle_param.map = map;				
		user_circle = new google.maps.Circle(cirle_param);				

		/*tạo đối tượng geo*/
		geocoder = new google.maps.Geocoder();
		
		
		/*đặt sự kiện click cho bản đồ*/
		google.maps.event.addListener(map, 'click', function(event) 
		{
			
			marker.setPosition(event.latLng);
			
			
			//BEGIN:Vẽ hình tròn bao quan UserLocation
			user_circle.center = event.latLng;

            user_circle.bindTo('center', marker, 'position');
				
  			document.getElementById("longlat").value = event.latLng.lat() + "," + event.latLng.lng();

		});
		
		update_map();
	}
	/*end: function initMap()*/

	
	/*Hàm lấy địa chỉ đã chọn thành 1 chuỗi*/
	function get_address()
	{
		
		
		str_address = "";
		
		/*Kiểm tra tên quốc gia*/
		str_country = $("#country option:selected").text();

		/*lấy khu vực*/
		str_area = "";
		area_num_level = 0;
		$( ".admin_area" ).each(function( index ) 
		{
			/*Nếu khu vực có giá trị*/		
			if($( this ).val() != "")
			{
				
				
				/*lấy id và tên khu vực*/
				obj_id = $( this ).attr( "id" );
				obj_text = $("#" + obj_id +" option:selected").text();
				
				/*nếu tên khu vực có giá trị*/	
				if(obj_text != "")
				{
					if(str_area != "") str_area = ", " + str_area;
					str_area = obj_text + str_area;
					
					area_num_level += 3;
				}
			}
			/*end: if($( this ).val() != "")*/
			
			
		});



		
		
		/*lấy địa chỉ gồm: tên địa điểm, địa điể, trực thuộc, số nhà đường phố*/
		address = "";
		if(document.getElementById("place_name")) address = document.getElementById("place_name").value;

		/*địa điểm trực thuộc*/		
		if($("#place").val() != "")
		{
			if(address != "") address += ", ";
			address +=  $("#place option:selected").text();
		}
		
		/*số nhà, đường phố*/
		street = "";
		street_value = $("#street option:selected").val(); 
		street_name = $("#street option:selected").text(); 
		street_name = street_name.trim();
		if(street_name != "" && street_value != "")
		{
			street = document.getElementById("street_number").value.trim() + " " + street_name;
			
			address =  street + ", " + address
		} 

		
		/*Chuỗi địa chỉ gồm địa chỉ, khu vực, quốc gia*/
		str_address = str_country;
		map_level = 3;
		
		/*cộng với chuỗi khu vực*/
		if(str_area != "")
		{
			str_address = str_area + ", " + str_address;
			map_level = 6 + area_num_level;
		}
		
		/*cộng với chuỗi địa chỉ*/
		if(address != "")
		{
			str_address = address + ", " + str_address;
			map_level = 17;
		}
		
		return str_address;		
	}  
	
	/*Hàm cập nhật hiển thị bản đồ*/
	function update_map()
	{
		
		/*Lấy địa chỉ*/
		address = get_address();

		/* console.log(map_level); */
		
		/* console.log(address); */
		
		/*Đưa bản đồ vào địa chỉ*/
		center_map(address);
		
		/*đặt lại zoom*/
		map.setZoom(map_level);

	}
	/*end: function update_map()*/ 
	 
	 /*Hàm đưa trung tâm bản đồ đến 1 địa chỉ*/  
	function center_map(str_address)
	{
		
		/*lấy tọa độ dựa vào địa chỉ*/
		geocoder.geocode({ 'address': str_address  }, function (results, status) 
		{

			if (status == google.maps.GeocoderStatus.OK) {
	
				/*Center map on location*/
				map.setCenter(results[0].geometry.location);
	
				/* Add marker on location */
				if(!marker) marker = new google.maps.Marker({	map: map,	position: results[0].geometry.location		});
				else marker.setPosition(results[0].geometry.location);
	
				user_circle.bindTo('center', marker, 'position');
				
				/*Đưa tọa độ vào input longlat*/
  				document.getElementById("longlat").value = results[0].geometry.location.lat() + "," + results[0].geometry.location.lng();
			
			} else {
	
				alert("Geocode was not successful for the following reason: " + status);
			}
    	});
	}
	/*end: function center_map()*/
	
	
/*END :Phần bản đồ*/
</script>
<script type="text/javascript">
	function check_form()
	{	
		/*Kiểm tra có nhập tên không*/
		if(document.getElementById("title").value == "")
		{
			alert('xin vui lòng nhập tiêu đề');
			document.getElementById("title").focus();
			return;
		}

		/*Kiểm tra có nhập địa chỉ không*/
		if(document.getElementById("place_name_select").innerHTML == "")
		{
			alert('xin vui lòng nhập địa chỉ tổ chức');
			return;
		}
		
		/*Nếu uploader1 không có file nào được chọn thì submit form để lưu dữ liệu. Nếu có chọn file thì upload file*/ 
		if(uploader1.num_selected == 0) document.getElementById("form_insert").submit();
		else uploader1.start();
	}
	/*end : function kiemtra()*/

	/*Hàm được gọi khi upload file xong*/
	function upload_done()
	{
		document.getElementById("form_insert").submit();
		
	}
	/*end : function upload_done()*/

	/*hàm ready sẽ được gọi khi thư viện jquery đã tải xong*/
	/*Tạo đối tượng upload fille*/
	var uploader1;
	$(document).ready(function()
	{
		/*Khởi tạo đối tượng upload file*/
		param_upload = {"target":"#select_file",
						"done": "upload_done", 
						"value": "file_name", 
						"ext": "doc,xls,docx,xlsx,jpg,png,pdf,jpeg"
						};
		uploader1 = new Uploader(param_upload);

		/*Lấy tên file đã lưu*/
		var str_file_name = "";

		/*Nếu có tên file thì hiển thị file đã lưu*/
		if(str_file_name != "") uploader1.show(str_file_name);


	});
	/*end : $(document).ready(function()*/

	/*Hàm tạo url_key từ title*/
	$(document).ready(function(){
		$("#title").blur(function(){
			var title = (document.getElementById("title").value);		
			var str= title.toLowerCase();
            str= str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a");
            str= str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e");
            str= str.replace(/ì|í|ị|ỉ|ĩ/g,"i");
            str= str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o");
            str= str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u");
            str= str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y");
            str= str.replace(/đ/g,"d");
            str= str.replace(/!|@|\$|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\'| |\"|\&|\#|\[|\]|~/g,"-");
            str= str.replace(/-+-/g,"-"); //thay thế 2- thành 1-
            str= str.replace(/^\-+|\-+$/g,"");//cắt bỏ ký tự - ở đầu và cuối chuỗi
            $("#url_key").val(str);	
		})
	})

</script>
<style>
#menu_org {
    margin: 0 auto 10px;
    /* display: table; */
    width: 100%;
    background-color: #0e605c;
    display: table;
    padding-left: 10px;
    list-style: none;
    box-sizing: border-box;
}

#menu_org ul {
    list-style: none;
    box-sizing: border-box;
    display: table;
    margin: 0 auto;
    border: solid 0px;
}

#menu_org li {
    background: #358e8a;
    float: left;
    width: auto;
    border: solid 1px #21115e;
    position: relative;
    /* transform: skewX(25deg); */
}

#menu_org li a {
    /* transform: skewX(-25deg); */
    padding: 1em 2em;
    display: block;
    color: #fff;
    text-transform: uppercase;
    text-decoration: none;
    font-family: Arial, Helvetica;
    font-size: 12px;
}
</style>            </div></div>
<!-- END: CONTENT --> 
		<!-- BEGIN: FOOTER-->
<div id="footer" class="col100 left">
                      
	<!-- begin: footer2-->
	<div id="footer2" class="col100 left">
            
		<!-- begin: footer2-1-->
		<div id="footer2_1" class="col100 left">
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Giới thiệu </a>
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Điều khoản sử dụng -</a>   
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Hướng dẫn sử dụng -</a>    
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Góp ý -</a>   
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Cam kết -</a>  
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Phản hồi -</a> 
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Chăm sóc khách hàng -</a> 
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Liên hệ -</a><br>
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Quy chế hoạt động -</a> 
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Chính sách bảo mật thông tin -</a> 
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">Cơ chế giải quyết tranh chấp -</a>
		</div>
		<!-- end: footer2-1-->

		<!-- begin: footer2-2-->
		<div id="footer2_2" class="col100 left">
			<a href="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news#" class="link5">© Phát triển bới Khiết Long</a>
		</div>
		<!-- end: footer2-2-->   
                  
	</div>
	<!-- end: footer2-->
	
</div>
<!-- END: FOOTER-->
<style>
 #footer{ padding: 10px}
</style>

<link href="./Quảng cáo online - Website Danagon_files/dialog.css" rel="stylesheet" type="text/css"><script src="./Quảng cáo online - Website Danagon_files/dialog.js.download"></script><link href="./Quảng cáo online - Website Danagon_files/auto_complete.css" rel="stylesheet" type="text/css"><script src="./Quảng cáo online - Website Danagon_files/auto_complete.js.download"></script><script>

	$(document).ready(function()
	{
		if ($.fn.autocomplete) 
		{ 
			if($( "select[autocomplete][autocomplete='on']" ).length>0) $( "select[autocomplete][autocomplete='on']" ).autocomplete();
		}
	}); 
	
</script> 
	</div> 
	<!-- End of wrapper -->

<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div><div id="dialog_place" class="window_address" style="left: 0px; width: auto; height: 90%; display: none;"><div class="window_address_top" id="dialog_place_top"><span>Nhập địa chỉ</span><a href="javascript:void(0)" onclick="close_my_web_dialog(&quot;dialog_place&quot;)">Close</a></div><div class="col100 left window_address_content" id="dialog_place_content"></div></div><form method="post" action="http://danagon.khietlong.vn/user_org/index/5f4082d936a1a8841fT3GT.html?page=compose&amp;type=news" id="form_upload_1" enctype="multipart/form-data"><input hidden="true" style="display: none" id="hidden_file_upload_1" type="file" name="file"></form><div class="selection_bubble_root" style="visibility: hidden;"><span id="speaken">X</span></div><div id="image_search" class="selection_img_search" style="visibility: hidden;"></div></body></html>